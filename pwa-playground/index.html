<!doctype html>

<head>
  <!-- Disable caching so github.io pages always show latest -->
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <!-- <meta name="apple-mobile-web-app-status-bar-style" content="red"> -->
  <meta name="apple-mobile-web-app-title" content="PWA Playground">
  <link rel="apple-touch-icon" href="icon.png">
  <link rel="apple-touch-startup-image" href="icon.png">

  <link rel="manifest" href="manifest.json">
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('service-worker.js')
          .then((reg) => {
            console.log('Service worker registered.', reg);
          });
      });
    }
  </script>

  <script src="https://apis.google.com/js/platform.js"></script>
</head>

<body>
  <h1>hello world!</h1>
  <h2>BUILD 2</h2>

  <a href="https://www.google.com" target="_blank">Popup to non-PWA site!</a>
  <a href="https://www.google.com">Redirect to non-PWA site!</a>

  <div id="signInWithGoogle"></div>

  <script>
    gapi.load('auth2:signin2', () => {
      afterLoad();
    });

    async function afterLoad() {
      const googleAuth = await gapi.auth2.init({
        'client_id': '1060493815643-6kfpno3ref65qodsael85r98p7ptpdg2.apps.googleusercontent.com',
      });

      if (googleAuth.isSignedIn.get()) {
        await googleAuth.signOut();
      }

      gapi.signin2.render('signInWithGoogle', {
        'onsuccess': () => handleSignInSuccess(),
      });
    }

    function handleSignInSuccess() {

    }
  </script>
</body>
