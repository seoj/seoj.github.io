!function i(o,r,s){function u(e,t){if(!r[e]){if(!o[e]){var n="function"==typeof require&&require;if(!t&&n)return n(e,!0);if(a)return a(e,!0);throw(n=new Error("Cannot find module '"+e+"'")).code="MODULE_NOT_FOUND",n}n=r[e]={exports:{}},o[e][0].call(n.exports,function(t){return u(o[e][1][t]||t)},n,n.exports,i,o,r,s)}return r[e].exports}for(var a="function"==typeof require&&require,t=0;t<s.length;t++)u(s[t]);return u}({1:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Controller=void 0;var o=t("./model");function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var s=document.querySelector("canvas"),u={ArrowUp:o.Direction.up,ArrowDown:o.Direction.down,ArrowLeft:o.Direction.left,ArrowRight:o.Direction.right},t=function(){function n(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.model=t,this.view=e,this.touch0=null}var t,e,i;return t=n,(e=[{key:"start",value:function(){var n=this;this.model.reset(),document.addEventListener("keydown",function(t){var e=u[t.key];e&&(n.model.snakeDirection=e,t.preventDefault())}),s.addEventListener("touchstart",function(t){t.preventDefault(),n.touch0=t.touches[0]}),s.addEventListener("touchmove",function(t){t.preventDefault();var e=t.touches[0];n.touch0&&(t=e.clientX-n.touch0.clientX,e=e.clientY-n.touch0.clientY,Math.abs(t)>Math.abs(e)?n.model.snakeDirection=t<0?o.Direction.left:o.Direction.right:n.model.snakeDirection=e<0?o.Direction.up:o.Direction.down)}),setInterval(function(){n.view.update()}),setInterval(function(){n.model.next()},1e3/60)}}])&&r(t.prototype,e),i&&r(t,i),n}();n.Controller=t},{"./model":3}],2:[function(t,e,n){"use strict";var i=t("./controller"),o=t("./model"),t=t("./view"),o=new o.Model,t=new t.View(o);new i.Controller(o,t).start()},{"./controller":1,"./model":3,"./view":4}],3:[function(t,e,n){"use strict";function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function s(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}Object.defineProperty(n,"__esModule",{value:!0}),n.Direction=n.Point=n.Model=void 0;var u=function(){function t(){o(this,t),this.gridWidth=25,this.gridHeight=25,this.snake=null,this.food=null,this.gameOver=!1}return s(t,[{key:"isOutOfBounds",value:function(t){return t.x<0||(t.y<0||(t.x>=this.gridWidth||t.y>=this.gridHeight))}},{key:"reset",value:function(){this.snake=new c(new a(Math.floor(this.gridWidth/2),Math.floor(this.gridHeight/2)),2),this.generateFood()}},{key:"next",value:function(){this.snake&&!this.gameOver&&(this.snake.next(),this.snake.isSelfIntersecting||this.isOutOfBounds(this.snake.head)?this.gameOver=!0:this.food&&this.snake.includes(this.food)&&(this.snake.eat(),this.generateFood()))}},{key:"generateFood",value:function(){for(var t,e=this;;)if(this.food=new a(h(1,this.gridWidth-1),h(1,this.gridHeight-1)),null===(t=this.snake)||void 0===t||!t.positions.some(function(t){return t.equals(e.food)}))return}},{key:"foodPosition",get:function(){return this.food}},{key:"snakePositions",get:function(){return this.snake?this.snake.positions:[]}},{key:"snakeDirection",set:function(t){this.snake&&(this.snake.direction=t)}}]),t}();n.Model=u;var a=function(){function n(t,e){o(this,n),this.x=t,this.y=e}return s(n,[{key:"add",value:function(t){return new n(this.x+t.x,this.y+t.y)}},{key:"equals",value:function(t){return this.x===t.x&&this.y===t.y}}]),n}();n.Point=a;var l,c=function(){function n(t,e){o(this,n),this._positions=[],this._direction=null,this._uncomittedDirection=null,this._speed=2,this._countdown=0,this.length=0,this._positions=[t],this.length=e,this.resetCountdown()}return s(n,[{key:"resetCountdown",value:function(){this._countdown=Math.floor(30/this._speed)}},{key:"next",value:function(){var t;this.head&&this._uncomittedDirection&&0==this._countdown--&&(t=this.head.add(f[this._uncomittedDirection]),this._positions.unshift(t),this._positions=this._positions.slice(0,this.length),this.resetCountdown(),this._direction=this._uncomittedDirection)}},{key:"includes",value:function(e){return this.positions.some(function(t){return t.equals(e)})}},{key:"eat",value:function(){this._speed++,this.length++}},{key:"head",get:function(){return 0===this._positions.length?null:this._positions[0]}},{key:"positions",get:function(){return this._positions}},{key:"direction",set:function(t){this._direction&&d[this._direction]===t||(this._uncomittedDirection=t)}},{key:"isSelfIntersecting",get:function(){for(var t=1;t<this._positions.length;t++)if(this._positions[0].equals(this._positions[t]))return!0;return!1}}]),n}();function h(t,e){return Math.floor(Math.random()*(e-t)+t)}n.Direction=l,(n=l||(n.Direction=l={}))[n.up=1]="up",n[n.down=2]="down",n[n.left=3]="left",n[n.right=4]="right";var f=(i(n={},l.up,new a(0,-1)),i(n,l.down,new a(0,1)),i(n,l.left,new a(-1,0)),i(n,l.right,new a(1,0)),n),d=(i(n={},l.up,l.down),i(n,l.down,l.up),i(n,l.left,l.right),i(n,l.right,l.left),n)},{}],4:[function(t,e,n){"use strict";function s(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,e=function(){};return{s:e,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return r=t.done,t},e:function(t){s=!0,o=t},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw o}}}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}Object.defineProperty(n,"__esModule",{value:!0}),n.View=void 0;var a=document.querySelector("canvas"),i=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.model=t}var t,n,i;return t=e,(n=[{key:"update",value:function(){var t,e=a.width/this.model.gridWidth,n=a.height/this.model.gridHeight,i=a.getContext("2d");i.fillStyle="black",i.fillRect(0,0,a.width,a.height),this.model.foodPosition&&(t=this.model.foodPosition,i.fillStyle="red",l(i,t.x,t.y,e,n)),i.fillStyle="green";var o=s(this.model.snakePositions);try{for(o.s();!(r=o.n()).done;){var r=r.value;l(i,r.x,r.y,e,n)}}catch(t){o.e(t)}finally{o.f()}this.model.gameOver&&(i.textAlign="center",i.textBaseline="middle",i.font="48px VT323",i.fillStyle="white",i.fillText("GAME OVER",a.width/2,a.height/2))}}])&&o(t.prototype,n),i&&o(t,i),e}();function l(t,e,n,i,o){t.fillRect(Math.floor(e*i),Math.floor(n*o),Math.ceil(i),Math.ceil(o))}n.View=i},{}]},{},[2]);
